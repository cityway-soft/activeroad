#!/usr/bin/env ruby

require File.expand_path('../../config/boot', __FILE__)

# Way 12704296
# http://www.openstreetmap.org/browse/way/12704296

franklin_avenue_osm_geometry = GeoRuby::SimpleFeatures::Geometry.from_hex_ewkb "0102000020E6100000590000009AFDD39B278356C0BEDBCE25A6FD3D408E619858288356C0F65FF4C2DDFD3D401D57619D298356C0882B82A625FE3D40EC306BDA298356C0640B231632FE3D405987E1EC298356C0D91AFE8135FE3D40CF3910E72A8356C0FF300DA065FE3D40AED5FFE12B8356C0C6AB072299FE3D40D0F204502C8356C02269EEBEAFFE3D4011B9D1DE2C8356C096B91A07CDFE3D40D4EF179D2D8356C0E8CDD112F4FE3D405DCD46DE2D8356C00CCA8B6101FF3D40210B15D82E8356C06AB745C134FF3D40C446651A2F8356C0B697014C42FF3D404B2B1C972F8356C0DDAF7DDC5BFF3D40F1666CD92F8356C0395E826869FF3D40A6569262308356C0D5D7899685FF3D40B933FFD6308356C053C5C17E9DFF3D4055C5035F318356C028F2F064B9FF3D40E55A8ED1318356C0FA6086ECD0FF3D401CA0A6D3328356C0DA88AAE505003E40B63FBBD2338356C01526919039003E40622557CF338356C01526919039003E40BD5755D6348356C090DBA4796F003E4014DF6EEB348356C0A63AAC1377003E40A5960850358356C042309105BC003E408816D85C358356C04FB97F53C5003E401014C214388356C09278B6E555013E4005015CD1398356C0C3D6AC928F013E40AEA961253A8356C065E26D82A6013E406F9C89FF3A8356C019DFEEE1C6013E40E3A3D3073B8356C060B9441CC9013E407B4A70423C8356C09CD4F1400A023E40823973183D8356C0C6282F4E3D023E408D5E845B3D8356C0EB09C79F4D023E40F163654A3E8356C077DEECE18F023E406035A1E53E8356C0BD0485D8B0023E40E6F748703F8356C097BEEFBECD023E402028C9BF3F8356C05F0E7872D7023E40DBB4C3C3408356C0A708090EF6023E4079C18DD4418356C0331EAE0A25033E402D5F8502428356C00E8EF4192D033E40D7906056438356C02971E13860033E40AA677DE0448356C0B735498E8E033E400D14A838458356C07BD397019F033E40487447F1458356C0DDF4A3CDC1033E40873A1480468356C0DC786A85E1033E403672DED7468356C0341956CAF4033E40C3F369CF478356C0FE90D9B623043E401415560E488356C06F7E7FB52F043E400313EDF4488356C002C374B25A043E40E12C8F2B498356C05A43632268043E40F2B7CD44498356C0F98F242573043E40383D7E404A8356C01414051BB7043E403FB556164C8356C0E48973D6F8043E40D1F5C57A4D8356C008E714E13B053E407591548F4E8356C01BDFEA127E053E405F59DD08508356C078E06768C3053E40826F5A3B508356C0AF9AB8F9CC053E406B37E3B4518356C0A617C9FC11063E4032E9EEFB528356C01DA69FB853063E400A26395C548356C01482D36E96063E40AD6811DA548356C08778104FAD063E40F364ECD5548356C0DB3757C0AE063E4033FB99FB548356C0E657D032BB063E40008AFD18558356C0EEEAFD75C3063E4074C1668A558356C0344DF97AD9063E400602D6EE568356C0F945001D1D073E4098B96F53578356C04993417230073E4018E6CA9E578356C0AB07C9993E073E404C8786EA578356C05C8E84FB4E073E400C4A8F5B588356C09A98FC6166073E40920C37E6588356C05F2A343384073E40BCB1781C598356C068A3159A8F073E401F5EA374598356C0A1F4B4ACA2073E40CD6CD69E598356C051449025AA073E40C2A07BF2598356C01DF1918FB8073E40026748815A8356C00A035A23D1073E400E8C59C45A8356C00CEFF8EFDC073E404E2207EA5A8356C0939C8DF7E2073E40841C79CC5B8356C0271024280A083E40EC2ED1FA5B8356C0AF2B6EF315083E40FF12C6AA5C8356C0E2BD34CB41083E405034B2E95C8356C02958A85F52083E40F8DCB73D5D8356C08EACCDB166083E40E2EB4B4E5D8356C0306F474C6A083E400502C9805D8356C0AFD0C1AB73083E40EE407CFA5D8356C0A6272FAC8A083E40FABE43D45E8356C022A61F20AE083E40745CDA1B5F8356C0DBB44550C2083E40"

road_geometry = GeoRuby::SimpleFeatures::MultiLineString.from_line_strings([franklin_avenue_osm_geometry], franklin_avenue_osm_geometry.srid)

franklin_avenue = ActiveRoad::Base.find_or_create_by_objectid :objectid => "osm:12704296", :name => "Franklin Ave", :geometry => road_geometry

[
 { :number => "3039", :location_on_road => 0, :geometry => "0101000020E61000009AFDD39B278356C0BEDBCE25A6FD3D40" },
 { :number => "6441", :location_on_road => 0.802483473456094, :geometry => "0101000020E6100000E07D552E548356C06E675F7990063E40" }
].each do |attributes|
  attributes[:geometry] = GeoRuby::SimpleFeatures::Geometry.from_hex_ewkb attributes[:geometry]
  franklin_avenue.numbers.find_or_create_by_number(attributes[:number]).update_attributes attributes
end
